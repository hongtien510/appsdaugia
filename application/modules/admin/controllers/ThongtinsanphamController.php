<?phpclass Admin_ThongtinsanphamController extends App_Controller_AdminController {    public function init() {        parent::init();        $this->_SESSION=new Zend_Session_Namespace();    }    public function indexAction() {        $daugia = $this->view->info = App_Models_DaugiaModel::getInstance();		@$idpage = $_SESSION['idpage'];		$_SESSION['list_page'] = 0;				$sql = "Select menuthongtinsp from ishali_config where idpage = '". $idpage ."'";		$data = $daugia->SelectQuery($sql);		$menu = $data[0]['menuthongtinsp'];		$list_menu = explode(";", $menu);		$this->view->list_menu = $list_menu;				$idsp = @$_GET['idsp'];		if(@$_GET['keytab']=="")			$keytab = 1;		else			$keytab = @$_GET['keytab'];				$this->view->idsp = $idsp;		$this->view->keytab = $keytab;						$slTab = count($list_menu);		$sql = "Delete from ishali_thongtinsp where idsp = '". $idsp ."' and keytab > '". $slTab ."'";		$daugia->InsertDeleteUpdateQuery($sql);						$sql = "select tensp from ishali_bid_sanpham where idsp = '". $idsp ."'";		$data = $daugia->SelectQuery($sql);		$this->view->tensp = $data[0]['tensp'];				$sql = "Select noidung from ishali_thongtinsp where idsp = '". $idsp ."' and keytab = '". $keytab ."'";		$data = $daugia->SelectQuery($sql);		if(count($data) > 0)			$noidung = $data[0]['noidung'];		else			$noidung = "";				$this->view->noidung = $noidung;						    }		public function thongtinsanphamxulyAction(){        $daugia = $this->view->info = App_Models_DaugiaModel::getInstance();				$idsp = $_POST['idsp'];		$keytab = $_POST['keytab'];		$noidung = $_POST['noidung'];				$sql = "Select 1 from ishali_thongtinsp where idsp = '". $idsp ."' and keytab = '". $keytab ."'";		$data = $daugia->SelectQuery($sql);		if(count($data) ==0)		{			$sql = "Insert into ishali_thongtinsp(idsp, keytab, noidung) value(";			$sql.= "'".$idsp."', '".$keytab."', '".$noidung."') ";		}		else		{			$sql = "Update ishali_thongtinsp set ";			$sql.= "noidung = N'".$noidung."' ";			$sql.= "where idsp = '". $idsp ."' and keytab = '". $keytab ."'";		}		$data = $daugia->InsertDeleteUpdateQuery($sql);				if($data == 1)		{			echo "<script>ThongBaoDongY('Lưu Thành Công.', '".ROOT_DOMAIN."/admin/thongtinsanpham?idsp=".$idsp."&keytab=".$keytab."');</script>";			}		else		{			echo "<script>ThongBaoDongY('Lưu không thành công<br/>Vui Lòng thực hiện lại thao tác.', '".ROOT_DOMAIN."/admin/thongtinsanpham?idsp=".$idsp."&keytab=".$keytab."');</script>";		}			}		}